---
title: "my_first_quarto"
author: "Helene B. Thomsen"
format: html
---
## My notes
- Opened quarto (cmd+shit+p and search for quarto)
- Table of content just for me (cmd+shit+p and search for outline)
- Insert code chunk (cmd+shit+p and search for chunk, "Insert a new chunk code")
- run line (ctrl + enter)
- Zenodo is also a place with free datasets
- To find help through console we can use "?geom_bar" to know something about geom_bar() function

## Setup code chunk
"setup" is the label and "setup" is special because it is decoted that this chunk should be run first
```{r setup}
library(tidyverse)
# option + minus = <-
# option + i = |

#| message: false # removes message output from file
#| warning: false # removes warnings from output file

# read_csv2 means to read semicolon seperated files like the python ,sep=;
data_post_meal <- read_csv2(here::here("data/post-meal-insulin.csv"))

data_post_meal_small <- select(data_post_meal, id, Age, BMI, Group, auc_pg, auc_ins, glykemi)


data_post_meal_small_tidier <- data_post_meal_small |>
  rename(auc_glucose = auc_pg,
         auc_insulin = auc_ins) |>
  filter(glykemi == 0) |>
  select(-glykemi)

```


## Showing the data
```{r}
data_post_meal
# glimpse(data_post_meal)
```

```{r}
#| fig-cap: "Distribution of BMI"
#| label: fig-bmi-hist
ggplot(data_post_meal, aes(x = BMI)) +
  geom_histogram()
```


```{r}
#| fig-cap: "Barplot: plotting one discrete variables"
#| label: fig-bmi-bar
ggplot(data_post_meal, aes(x = glykemi)) +
  geom_bar()
```

```{r}
# Group and glykemi are columns in the dataset
data_post_meal |>
  ggplot(aes(x = Group, fill = glykemi)) +
  geom_bar()
```
```{r}
# fixing abovementioned issue using as.charachter
data_post_meal |>
  ggplot(aes(x = Group, fill = as.character(glykemi))) +
  geom_bar()
```


```{r}
# position_dodge() is used for seperating the two columns
data_post_meal |>
  ggplot(aes(x = Group, fill = as.character(glykemi))) +
  geom_bar(position = position_dodge())
```


## putting two plots side by side

```{r side-by-side-figs}
#| fig-cap: "BMI and glycemia, side by side plots"
#| label: fig-bmi-glycemi
#| fig-subcap:
#| - "Distribution of BMI"
#| - "Number of hyperglycemic participants"
#| layout-ncol: 2

ggplot(data_post_meal, aes(x = BMI)) +
  geom_histogram()

ggplot(data_post_meal, aes(x = glykemi)) +
  geom_bar()
```

geom_point()
geom_point()
geom_smooth()

## plotting two continuous variables
```{r}
#| fig-cap: "BMI agains auc of blood glucose"
#| label: fig-two-continuous-varialbes
ggplot(data_post_meal, aes(x=BMI, y=auc_pg)) +
  geom_point() +
  geom_smooth()
```

## Pushing changes to remote
## pulling changes locally

## Data wrangling
### selecting data
```{r}
select(data_post_meal, Age, "BMI", Weight) # selecting columns

select(data_post_meal, -Group) # removing the group column

select(data_post_meal, starts_with("PG")) # all variables that start with PG has now been selected. We have not assigned this to anything yet.
select(data_post_meal, ends_with("DXA"))

select(data_post_meal, contains("0"))
```

## renaming columns
```{r}
data_post_meal_small |>
  rename(auc_glucose = auc_pg,
         auc_insulin = auc_ins)
```



## excercise 11.6
### select and rename task
```{r}
# Task 1.
 data_post_meal |>
  select(contains("OGTT"))
# 13 columns

 
# Task 2.
data_post_meal |>
  select(contains("..", -contains("..."))) |>
  rename(Insulin_minus_5_OGTT = Insulin..5.OGTT.X) |>
  rename(P_Glucose_minus_5_OGTT = P.Glucose..5.OGTT)
# post_meal_data |>
#   ___(
#     ___ = ___,
#     ___ = ___
#   )
# 
# # Task 3.
# basic_info <- select(post_meal_data, id, BMI, Length, Weight, Age)
# rename(basic_info, Height = Length)
```

## filtering data by row
```{r}
data_post_meal_small |>
  filter(glykemi == 1 )

data_post_meal_small |>
  filter(BMI >= 25)

data_post_meal_small |>
  filter(Group == "CTR")
```

```{r}
data_post_meal_small |>
  filter(Group == "CTR", BMI >=25) # both "," and "&" means AND
data_post_meal_small |>
  filter(Group == "CTR" & BMI >=25)

data_post_meal_small |>
  filter(Group == "CTR" | BMI >=25)
```



```{r}
data_post_meal_small_tidier <- data_post_meal_small |>
  rename(auc_glucose = auc_pg,
         auc_insulin = auc_ins) |>
  filter(glykemi == 0) |>
  select(-glykemi)
```


# Day 3
## Modify or column
```{r}
data_post_meal_small_tidier |>
  mutate(insulin_glucose_ratio = auc_insulin/auc_glucose,
         Group = if_else(Group=="CTR", "Control", "First-degree relative"))
```

























